## (1) Heavy User 분석
- 주제 : 카카오맵 서비스를 이용하며 연세대학교 주변 카페를 방문한 Heavy User들이 선호하는 카페는 어디일까? <br>
  - Heavy User : RFE 점수가 상위 25% 범위에 속한 사용자<br><br>
- 분석 방법 : RFE 분석
  - RFE 분석이란?
      > 거래의 최근성 (Recency), 거래 빈도 (Frequency), 거래 규모 (Monetary)를 기반으로 고객 가치를 판단하고 고객을 세그멘테이션하는 RFM 분석 프레임워크의 변형으로, 거래 규모 대신 참여도 (Engagement)를 고려한다.
  - 본 프로젝트에서는 데이터의 의미와 특성을 고려해 최근성, 거래 빈도, 참여도를 아래와 같이 정의한다.
    1) <b>최근성 (Recency)</b> - 범 연세대 구역 카페에 대해 가장 최근에 작성된 리뷰와 사용자가 연세대 주변 카페를 방문한 뒤 가장 최근에 작성한 리뷰 사이의 시차 (days 기준)
    2) <b>거래 빈도 (Frequency)</b> - 사용자가 범 연세대 구역 카페를 방문한 뒤 리뷰를 작성한 횟수
    3) <b>참여도 (Engagement)</b> - 사용자의 카카오맵 배지 레벨 (후기 작성, 장소 제안, 사용자 팔로우 등을 통해 얻은 포인트를 기준으로 한 레벨) 해당 항목에서는 카카오맵 서비스 관여도가 높을수록 범 연세대 지역 카페에 관심을 갖고 방문할 가능성이 높은 유저라고 가정한다.
- 분석 과정<br>
  <b>1.RFE 점수 계산하기</b>
    - R과 E 점수의 경우, 데이터를 4등분으로 나눠 각각 차등 점수를 부여. 이 때, R은 Recency가 작을수록 큰 값을 부여함.
    - Frequency의 경우 value가 1인 경우가 전체의 약 80% 였기 때문에 등간격 구획이 불가함. 이에 따라, Frequency가 1인 경우, 2인 경우, 3인 경우, 4인 경우와 5 이상인 경우로 나눠 점수를 부여함.
    - R, F, E 각각의 점수를 합쳐 하나의 RFE 점수를 생성함. 이 때, 데이터의 편향과 주제 적합성을 고려해 F, E에는 0.7의 가중치를 부여함. <br>
    
  <b>2.RFE 점수에 따라 등급 나누기</b>
    - 등급 개수를 4개로 임의 선정 후, qcut을 사용해 RFE 점수 기준 등간격으로 나눔

  <b>3.Diamond Class 유저들의 선호 카페</b>
    - Diamond Class에 속한 유저들로 데이터를 필터링해 사용
    - 유저 선호도
       ```
      def custom_sort(row, avg_user):
        if row['user_count'] <= avg_user:
            return row['rating_avg'] + row['user_count'] * 0.01
        else:
            return row['rating_avg'] + 5
      ```
    - 선호도 점수 따라 데이터프레임 sorting 후 상위 10개 카페 목록 추출

- 분석 결과 <br>
  - 아래 그림의 10가지 카페에 대한 유저 선호도가 가장 높았음. 그래프 상에서 너비는 방문자 수, 색깔은 카페에 대한 Diamond User의 평균 평점을 나타낸다.

![diamond 유저 선호 카페](https://github.com/Innyy/24-1DAmini/assets/103313849/0ad9455d-7ae1-4c90-91e3-6ade40e8b803)


    - 등급별 동문/서문/정문 카페 평균 유저 평점 : 동문, 서문에 비해 정문 지역 평점이 다소 낮음.
    
    ![image](https://github.com/Innyy/24-1DAmini/assets/103313849/8b699b20-832c-42ed-8be6-d6935058b95f)

    - RF 지표를 활용한 추가 분석 : 카페 방문 빈도가 높을수록 (여러 카페를 방문했거나 같은 카페를 여러번 방문했거나) 리뷰 감성 점수 평균이 낮음. 즉, 범 연세대 구역 카페 간의 퀄리티 편차가 크다 또는 같은 카페의 날짜별 퀄리티 편차가 크다는 두 가지 가설을 세워볼 수 있음. 추가적인 분석을 통해 해당 가설을 검정해볼 수 있겠으나, 시간적 한계로 인해 해당 부분까지 나아가지 못함.
    
    ![image](https://github.com/Innyy/24-1DAmini/assets/103313849/1d283161-f05b-4859-912d-6669a24303bc)


- 분석 과정에서의 어려움/한계
    - Monetary (구매량) 관련 정보가 존재하지 않아 카카오맵 배지 레벨을 Engagement 척도로 삼아 사용했으나, 신촌 지역 카페 Heavy User 분석이라는 주제에 완전히 들어맞지는 않는 데이터임
    - RFE 점수 계산 시 가중치는 매출 기여도의 분산을 최대화하는 값으로 설정하는 것이 정설이나, 관련 데이터의 부재로 임의 부여함.
    - Recency, Engagement 의 경우 단순히 크기로 정렬해 20%씩 할당했는데, 이는 곧 동일한 행동을 보이는 (동일 값을 갖는) 유저가 다른 등급으로 취급될 수 있는 문제가 존재함. 특히나 Recency는 산업 도메인에 따라 분석가가 임의로 값을 부여해야 하는데, 카페 시장에 대한 이해가 다소 불충분한 상태에서 분석을 진행했다는 점에서 한계가 있을 수 있음. 

- 향후 분석 결과 활용 제안
  - 각 등급 유저들의 선호도 카페 목록을 기반으로 카페 추천 서비스
  - RFE 점수에 따른 등급을 보다 세분화 해 "Frequency, Engagement 모두 높지만 Recency가 낮은 이탈 위험 고객군" 파악 및 관련 전략 수립 가능
  - RF 지수에 따른 분석 결과와 과정을 더욱 구체화 해 원인을 찾아볼 수 있음.
  
## (2) 지역별 리뷰 수가 가장 많은 유저 분석
- 주제 : 정문/서문/동문 각 지역별로 카페 방문 횟수가 상위 0.1%인 유저들이 선호하는 카페는 어디일까?
- 분석 방법:
    - 지역별 카페 방문 횟수를 사용자가 각 지역 카페에 관한 리뷰를 남긴 횟수로 정의. 리뷰 수 (방문 횟수) 분포를 살펴보았을 때 대부분이 1~3 사이였으므로 '매니아'층의 의미를 살리기 위해 상위 0.1% 유저로 설정
      
    - (1)의 유저 선호도 함수를 동일하게 적용해 지역별 카페 리뷰 수가 상위 0.1%인 유저들의 선호 카페 목록 추출

- 분석 결과 :
  
[정문 지역 매니아들이 선호하는 카페]
|상호명|평균 평점|방문자 수|
|------|---|---|
|독수리다방|4.6|3|
|미네르바|4.5|2|
|논탄토 신촌점|4.5|2|
|호빌밭|3.8|5|
|더파이홀|3.6|5|

[서문 지역 매니아들이 선호하는 카페]
|상호명|평균 평점|방문자 수|
|------|---|---|
|프로토콜|5|2|
|윈야드|5|2|
|로우키 연희점|4.5|2|
|컬러드빈|4.3|3|
|매뉴팩트커피 연희본점|4.1|3|

[동문 지역 매니아들이 선호하는 카페]
|상호명|평균 평점|방문자 수|
|------|---|---|
|아마스빈 이대점|5|6|
|카페아늑|5|4|
|와플잇업 이대2호점|4.87|8|
|벨라프라하|4.66|9|
|옥루몽 신촌본점|4.5|4|


## (3) 깐깐한 미식가
- 주제 : 사용자 평균 별점이 하위 1%에 속하며 사용자 리뷰 개수가 상위 1%에 속하는 까다로운 미식가들이 선호하는 카페는 어디일까?
- 분석 방법:
    - 사용자 평균 별점이 하위 1% (2.8 이하) & 리뷰 개수가 상위 1% (182개 이상)인 유저들만 필터링해 데이터프레임 구축
    - (1)의 유저 선호도 함수 동일하게 적용해 깐깐한 미식가들의 선호 카페 추출

- 분석 결과 :

[깐깐한 미식가들이 선호하는 카페]
|상호명|평균 평점|방문자 수|
|------|---|---|
|호밀밭|5|6|
|올레무스|5|4|
|스타벅스 이대R점|3|8|
|더파이홀|5|1|
|카페베이지크|4.5|1|

## (4) 유저 클러스터링
- 주제 : 신촌 지역 카페 평가 경향을 기준으로 유저를 클러스터링할 수 있을까?
- 분석 방법 :
    - 신촌 지역 카페 평가 경향 지표 : 유저별 리뷰 감성 분석 점수의 평균, 신촌 지역 카페에 대한 유저 평점의 평균
    - 두 가지 지표를 이용해 최적의 K값 3에 대한 K-means 클러스터링 진행
    - 클러스터링 결과:
        - 클러스터 1 : 평균 감성 점수 1.75, 평균 평점 4.72 - Positive
        - 클러스터 2 : 평균 감성 점수 -0.32, 평균 평점 : 1.37 - Negative
        - 클러스터 3: 평균 감성 점수 0.05, 평균 평점 : 4.44 - Neutral

![clustering_result](https://github.com/Innyy/24-1DAmini/assets/103313849/11c906d8-2df8-4579-90ed-42a1d6a9ac79)

![클러스터별 EMOTION, AVG](https://github.com/Innyy/24-1DAmini/assets/103313849/bcb8e8c7-207e-448c-8578-4e92b6dcb6ae)

   - (1)에서 정의한 선호도 함수를 이용해 클러스터별 유저가 가장 선호하는 카페 5개를 정문/서문/동문에서 뽑아냄 (유저 분석 > User Clustering에서 확인 가능)

- 분석 과정에서의 어려움/한계
    - 초기 목표는 범 연세대 구역 카페 방문 횟수, 평균 평점, 감성 점수 평균 등 더 많은 FEATURE를 사용해 클러스터링을 하는 것이었는데, 유의미한 구분 결과가 나오지 않아 기준 feature 수를 줄임.
    - 클러스터에 대한 매우 얕은 수준의 분석

- 향후 활용 방안
    - 특히 Negative한 평가 경향을 보이는 클러스터 2의 사용자들의 리뷰를 분석해 범 연세대 구역 카페들의 개선점 도출 가능

